{"ast":null,"code":"import _asyncToGenerator from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useEffect,useState}from'react';import{useHistory,Link,useParams}from'react-router-dom';import{AuthContext}from'../../../App';// api\nimport{editHousehold,getHousehold}from'../../../api/household';// css\nimport style from'./EditHousehold.module.scss';// image\nimport MemoMark from'../../../image/nameMark.png';import PriceMark from'../../../image/priceMark.png';// interface\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditHousehold=function EditHousehold(){var history=useHistory();var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var urlParams=useParams();var initialState={name:'',amountPlanned:0};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),currentHousehold=_useState2[0],setCurrentHousehold=_useState2[1];// 入力値の取得\nvar handleInputChange=function handleInputChange(input){return function(e){var target=e.target;setCurrentHousehold(_objectSpread(_objectSpread({},currentHousehold),{},_defineProperty({},input,target.value)));};};// 家計簿の詳細取得\nvar handleGetHousehold=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(currentUser){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return getHousehold(currentUser.id,Number(urlParams.householdId));case 5:res=_context.sent;setCurrentHousehold(res===null||res===void 0?void 0:res.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleGetHousehold(){return _ref.apply(this,arguments);};}();// 家計簿の編集\nvar handleEditHousehold=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var params,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();params={name:currentHousehold.name,amountPlanned:currentHousehold.amountPlanned};if(currentUser){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:_context2.prev=4;_context2.next=7;return editHousehold(currentUser.id,Number(urlParams.householdId),params);case 7:res=_context2.sent;if((res===null||res===void 0?void 0:res.status)===200){history.push(\"/\".concat(Number(urlParams.householdId),\"/spendings\"));}_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);alert('登録ができませんでした');case 15:;case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,11]]);}));return function handleEditHousehold(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){handleGetHousehold();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:style.edithousehold,children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputform,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputname,children:[/*#__PURE__*/_jsx(\"img\",{src:MemoMark,alt:\"input name\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u540D\\u524D\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",required:true,placeholder:\"\\u4F8B: \\u96FB\\u8ECA\\u4EE3\",value:currentHousehold.name,onChange:handleInputChange('name')})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputname,children:[/*#__PURE__*/_jsx(\"img\",{src:PriceMark,alt:\"input reference\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u5229\\u7528\\u4E88\\u5B9A\\u984D\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"plannedAmount\",min:\"0\",max:\"99999999\",required:true,value:currentHousehold.amountPlanned,onChange:handleInputChange('amountPlanned')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.buttonform,children:[/*#__PURE__*/_jsx(\"button\",{className:style.saveButton,onClick:handleEditHousehold,children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:style.cancelButton,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]})})});};export default EditHousehold;","map":{"version":3,"sources":["/Users/taiki/Desktop/household/frontend/src/components/Household/EditHousehold/EditHousehold.tsx"],"names":["React","useContext","useEffect","useState","useHistory","Link","useParams","AuthContext","editHousehold","getHousehold","style","MemoMark","PriceMark","EditHousehold","history","currentUser","urlParams","initialState","name","amountPlanned","currentHousehold","setCurrentHousehold","handleInputChange","input","e","target","value","handleGetHousehold","id","Number","householdId","res","data","console","log","handleEditHousehold","preventDefault","params","status","push","alert","edithousehold","inputform","inputname","buttonform","saveButton","cancelButton"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory, Link, useParams } from 'react-router-dom';\nimport { AuthContext } from '../../../App';\n// api\nimport { editHousehold, getHousehold } from '../../../api/household';\n// css\nimport style from './EditHousehold.module.scss';\n// image\nimport MemoMark from '../../../image/nameMark.png';\nimport PriceMark from '../../../image/priceMark.png';\n// interface\nimport { Household } from '../../../interface';\n\nconst EditHousehold: React.FC = () => {\n  const history = useHistory();\n  const { currentUser } = useContext(AuthContext);\n  const urlParams = useParams<{householdId: string;}>();\n  const initialState = {\n    name: '',\n    amountPlanned: 0,\n  };\n  const [currentHousehold, setCurrentHousehold] = useState(initialState);\n  // 入力値の取得\n  const handleInputChange = (input: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    const target = e.target;\n    setCurrentHousehold({ ...currentHousehold, [input]: target.value});\n  };\n  // 家計簿の詳細取得\n  const handleGetHousehold = async () => {\n    if (!currentUser) return;\n    try {\n      const res = await getHousehold(currentUser.id, Number(urlParams.householdId));\n      setCurrentHousehold(res?.data);\n    } catch (err: any) {\n      console.log(err);\n    }\n  };\n  // 家計簿の編集\n  const handleEditHousehold = async (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const params: Household ={\n      name: currentHousehold.name,\n      amountPlanned: currentHousehold.amountPlanned,\n    }\n    if(!currentUser) return;\n    try {\n      const res = await editHousehold(currentUser.id, Number(urlParams.householdId), params);\n      if (res?.status === 200) {\n        history.push(`/${Number(urlParams.householdId)}/spendings`);\n      }\n    } catch (err :any) {\n      console.log(err);\n      alert('登録ができませんでした')\n    };\n  };\n  useEffect(() => {\n    handleGetHousehold();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <>\n      <div className={style.edithousehold}>\n        <form>\n          <div className={style.inputform}>\n            <div className={style.input}>\n              <div className={style.inputname}>\n                <img src={MemoMark} alt='input name' />\n                <h4>名前</h4>\n              </div>\n              <input\n                type='text'\n                name='name'\n                required\n                placeholder='例: 電車代'\n                value={currentHousehold.name}\n                onChange={handleInputChange('name')}\n              />\n            </div>\n            <hr />\n            <div className={style.input}>\n              <div className={style.inputname}>\n                <img src={PriceMark} alt='input reference' />\n                <h4>利用予定額</h4>\n              </div>\n              <input\n                type='number'\n                name='plannedAmount'\n                min='0'\n                max='99999999'\n                required\n                value={currentHousehold.amountPlanned}\n                onChange={handleInputChange('amountPlanned')}\n              />\n            </div>\n          </div>\n          <div className={style.buttonform}>\n            <button className={style.saveButton} onClick={handleEditHousehold}>保存</button>\n            <Link to='/' className={style.cancelButton}>キャンセル</Link>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default EditHousehold"]},"metadata":{},"sourceType":"module"}