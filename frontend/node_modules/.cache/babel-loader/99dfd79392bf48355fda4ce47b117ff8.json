{"ast":null,"code":"import _asyncToGenerator from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useContext}from'react';import{Link,useHistory}from'react-router-dom';import Cookies from'js-cookie';import{AuthContext}from'../../App';// api\nimport{signUp}from'../../api/auth';// interface\n// image\nimport SignButton from'../../image/sign_button.png';// css\nimport style from'./Sign.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignUp=function SignUp(){var history=useHistory();var _useContext=useContext(AuthContext),setIsSignedIn=_useContext.setIsSignedIn,setCurrentUser=_useContext.setCurrentUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordConfirmation=_useState8[0],setPasswordConfirmation=_useState8[1];// サインアップ用\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();params={name:name,email:email,password:password,passwordConfirmation:passwordConfirmation};_context.prev=2;_context.next=5;return signUp(params);case 5:res=_context.sent;if(res.status===200){// アカウント作成と同時にログイン処理\nCookies.set(\"_access_token\",res.headers[\"access-token\"]);Cookies.set(\"_client\",res.headers[\"client\"]);Cookies.set(\"_uid\",res.headers[\"uid\"]);setIsSignedIn(true);setCurrentUser(res.data.data);history.push(\"/\");console.log(\"サインアップしました\");}else{alert('登録ができませんでした');};_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(_context.t0);alert('登録ができませんでした');case 14:;case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:style.sign,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u767B\\u9332\\u3057\\u305F\\u30E1\\u30FC\\u30EB\\u30FB\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\"}),/*#__PURE__*/_jsx(\"div\",{className:style.container,children:/*#__PURE__*/_jsxs(\"form\",{className:style.signform,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u540D\\u524D\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",required:true,type:\"text\",value:name,placeholder:\"\\u540D\\u524D\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",required:true,type:\"email\",placeholder:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",required:true,type:\"text\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9(\\u78BA\\u8A8D)\"}),/*#__PURE__*/_jsx(\"input\",{name:\"passwordConfirmation\",required:true,type:\"text\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3082\\u30461\\u5EA6\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",value:passwordConfirmation,onChange:function onChange(e){return setPasswordConfirmation(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"button\",{disabled:!email||!password?true:false,onClick:handleSubmit,children:[/*#__PURE__*/_jsx(\"img\",{src:SignButton,alt:\"sign button\"}),\"\\u65B0\\u898F\\u767B\\u9332\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:style.changebutton,children:[\"\\u767B\\u9332\\u3057\\u3066\\u3044\\u306A\\u3044\\u5834\\u5408\\u306F\",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"\\u3053\\u3061\\u3089\"})]})]});};export default SignUp;","map":{"version":3,"sources":["/Users/taiki/Desktop/household/frontend/src/components/Auth/SignUp.tsx"],"names":["React","useState","useContext","Link","useHistory","Cookies","AuthContext","signUp","SignButton","style","SignUp","history","setIsSignedIn","setCurrentUser","name","setName","email","setEmail","password","setPassword","passwordConfirmation","setPasswordConfirmation","handleSubmit","e","preventDefault","params","res","status","set","headers","data","push","console","log","alert","sign","container","signform","input","target","value","changebutton"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport { AuthContext } from '../../App';\n// api\nimport { signUp } from '../../api/auth';\n// interface\nimport { SignUpParams } from '../../interface';\n// image\nimport SignButton from '../../image/sign_button.png';\n// css\nimport style from './Sign.module.scss';\n\nconst SignUp: React.FC = () => {\n  const history = useHistory();\n  const { setIsSignedIn, setCurrentUser } = useContext(AuthContext);\n  const [name, setName] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>(\"\");\n  // サインアップ用\n  const handleSubmit = async (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const params: SignUpParams = {\n      name: name,\n      email: email,\n      password: password,\n      passwordConfirmation: passwordConfirmation,\n    };\n    try {\n      const res = await signUp(params);\n      if (res.status === 200) {\n        // アカウント作成と同時にログイン処理\n        Cookies.set(\"_access_token\", res.headers[\"access-token\"]);\n        Cookies.set(\"_client\", res.headers[\"client\"]);\n        Cookies.set(\"_uid\", res.headers[\"uid\"]);\n        setIsSignedIn(true);\n        setCurrentUser(res.data.data);\n        history.push(\"/\");\n        console.log(\"サインアップしました\");\n      } else {\n        alert('登録ができませんでした');\n      };\n    } catch (err: any) {\n      console.log(err);\n      alert('登録ができませんでした');\n    };\n  };\n\n  return (\n    <div className={style.sign}>\n      <h2>登録したメール・パスワードを入力</h2>\n      <div className={style.container}>\n        <form className={style.signform}>\n          <div className={style.input}>\n            <h3>名前</h3>\n            <input\n             name=\"name\"\n             required\n             type=\"text\"\n             value={name}\n             placeholder='名前を入力してください'\n             onChange={e => setName(e.target.value)}\n            />\n          </div>\n          <div className={style.input}>\n            <h3>メールアドレス</h3>\n            <input\n              name=\"email\"\n              required\n              type=\"email\"\n              placeholder='メールアドレスを入力してください'\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n            />\n          </div>\n          <div className={style.input}>\n            <h3>パスワード</h3>\n            <input\n              name=\"password\"\n              required\n              type=\"text\"\n              placeholder='パスワードを入力してください'\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n            />\n          </div>\n          <div className={style.input}>\n            <h3>パスワード(確認)</h3>\n            <input\n              name=\"passwordConfirmation\"\n              required\n              type=\"text\"\n              placeholder='パスワードもう1度を入力してください'\n              value={passwordConfirmation}\n              onChange={e => setPasswordConfirmation(e.target.value)}\n            />\n          </div>\n          <button\n            disabled={ !email || !password ? true : false }\n            onClick={handleSubmit}\n          >\n            <img src={SignButton} alt=\"sign button\" />新規登録</button>\n        </form>\n      </div>\n      <div className={style.changebutton}>\n        登録していない場合は\n        <Link to=\"/signin\">こちら</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default SignUp"]},"metadata":{},"sourceType":"module"}