{"ast":null,"code":"import _asyncToGenerator from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useState}from'react';import{useHistory,Link}from'react-router-dom';import{AuthContext}from'../../../App';// api\nimport{createHousehold}from'../../../api/household';// css\nimport style from'./AddHousehold.module.scss';// image\nimport MemoMark from'../../../image/nameMark.png';import PriceMark from'../../../image/priceMark.png';// interface\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddHousehold=function AddHousehold(){var history=useHistory();var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var initialState={name:'',amountPlanned:0};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),newHousehold=_useState2[0],setNewHousehold=_useState2[1];// 入力値の取得\nvar handleInputChange=function handleInputChange(input){return function(e){var target=e.target;setNewHousehold(_objectSpread(_objectSpread({},newHousehold),{},_defineProperty({},input,target.value)));};};// 家計簿の新規作成\nvar handleCreateHousehold=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();params={name:newHousehold.name,amountPlanned:newHousehold.amountPlanned};if(currentUser){_context.next=4;break;}return _context.abrupt(\"return\");case 4:_context.prev=4;_context.next=7;return createHousehold(currentUser.id,params);case 7:res=_context.sent;if((res===null||res===void 0?void 0:res.status)===200){console.log(res);history.push('/');}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);console.log(_context.t0);alert('登録ができませんでした');case 15:;case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,11]]);}));return function handleCreateHousehold(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:style.addhousehold,children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputform,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputname,children:[/*#__PURE__*/_jsx(\"img\",{src:MemoMark,alt:\"input name\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u540D\\u524D\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",required:true,placeholder:\"\\u4F8B: \\u96FB\\u8ECA\\u4EE3\",value:newHousehold.name,onChange:handleInputChange('name')})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:style.input,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.inputname,children:[/*#__PURE__*/_jsx(\"img\",{src:PriceMark,alt:\"input reference\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u5229\\u7528\\u4E88\\u5B9A\\u984D\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"plannedAmount\",min:\"0\",max:\"99999999\",required:true,value:newHousehold.amountPlanned,onChange:handleInputChange('amountPlanned')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.buttonform,children:[/*#__PURE__*/_jsx(\"button\",{className:style.saveButton,onClick:handleCreateHousehold,children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:style.cancelButton,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]})})});};export default AddHousehold;","map":{"version":3,"sources":["/Users/taiki/Desktop/household/frontend/src/components/Household/AddHouseHold/AddHousehold.tsx"],"names":["React","useContext","useState","useHistory","Link","AuthContext","createHousehold","style","MemoMark","PriceMark","AddHousehold","history","currentUser","initialState","name","amountPlanned","newHousehold","setNewHousehold","handleInputChange","input","e","target","value","handleCreateHousehold","preventDefault","params","id","res","status","console","log","push","alert","addhousehold","inputform","inputname","buttonform","saveButton","cancelButton"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport { AuthContext } from '../../../App';\n\n// api\nimport { createHousehold } from '../../../api/household';\n\n// css\nimport style from './AddHousehold.module.scss';\n\n// image\nimport MemoMark from '../../../image/nameMark.png';\nimport PriceMark from '../../../image/priceMark.png';\n\n// interface\nimport { Household } from '../../../interface';\n\nconst AddHousehold: React.FC = () => {\n  const history = useHistory();\n  const { currentUser } = useContext(AuthContext);\n\n  const initialState = {\n    name: '',\n    amountPlanned: 0,\n  };\n  const [newHousehold, setNewHousehold] = useState(initialState);\n\n  // 入力値の取得\n  const handleInputChange = (input: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    const target = e.target;\n    setNewHousehold({ ...newHousehold, [input]: target.value});\n  };\n\n  // 家計簿の新規作成\n  const handleCreateHousehold = async (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n\n    const params: Household ={\n      name: newHousehold.name,\n      amountPlanned: newHousehold.amountPlanned,\n    }\n\n    if(!currentUser) return;\n    try {\n      const res = await createHousehold(currentUser.id, params);\n      if (res?.status === 200) {\n        console.log(res);\n        history.push('/');\n      }\n    } catch (err :any) {\n      console.log(err);\n      alert('登録ができませんでした')\n    };\n  };\n\n  return (\n    <>\n      <div className={style.addhousehold}>\n        <form>\n          <div className={style.inputform}>\n            <div className={style.input}>\n              <div className={style.inputname}>\n                <img src={MemoMark} alt='input name' />\n                <h4>名前</h4>\n              </div>\n              <input \n                type='text'\n                name='name'\n                required\n                placeholder='例: 電車代'\n                value={newHousehold.name}\n                onChange={handleInputChange('name')}\n              />\n            </div>\n            <hr />\n            <div className={style.input}>\n              <div className={style.inputname}>\n                <img src={PriceMark} alt='input reference' />\n                <h4>利用予定額</h4>\n              </div>\n              <input \n                type='number'\n                name='plannedAmount'\n                min='0'\n                max='99999999'\n                required\n                value={newHousehold.amountPlanned}\n                onChange={handleInputChange('amountPlanned')}\n              />\n            </div>\n          </div>\n          <div className={style.buttonform}>\n            <button className={style.saveButton} onClick={handleCreateHousehold}>\n              保存\n            </button>\n            <Link to='/' className={style.cancelButton}>\n                キャンセル\n            </Link>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default AddHousehold"]},"metadata":{},"sourceType":"module"}