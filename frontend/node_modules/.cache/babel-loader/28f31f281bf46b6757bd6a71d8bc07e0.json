{"ast":null,"code":"import _asyncToGenerator from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext}from'react';import Cookies from'js-cookie';import{Link,useHistory}from'react-router-dom';import{AuthContext}from'../../../App';// component\nimport{signOut}from'../../../api/auth';// css\nimport style from'./MobileModal.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MobileModal=function MobileModal(props){var modalOpen=props.modalOpen,setModalOpen=props.setModalOpen;var history=useHistory();var _useContext=useContext(AuthContext),isSignedIn=_useContext.isSignedIn,setIsSignedIn=_useContext.setIsSignedIn;// モーダルの表示判定の変更処理\nvar handleModal=function handleModal(){setModalOpen(!modalOpen);};// サインアウト処理\nvar handleSignout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signOut();case 3:res=_context.sent;if(res.data.success===true){Cookies.remove(\"_access_token\");Cookies.remove(\"_client\");Cookies.remove(\"_uid\");setIsSignedIn(false);history.push(\"/signin\");console.log('サインアウトしました');}else{console.log('サインアウトに失敗しました');alert('サインアウトできませんでした');}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);alert('サインアウトできませんでした');case 11:;setModalOpen(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleSignout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(style.mobilemodal,\" \").concat(modalOpen?style.openmodal:''),children:/*#__PURE__*/_jsx(\"div\",{className:style.inner,children:/*#__PURE__*/_jsxs(\"div\",{className:style.list,children:[isSignedIn?/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setModalOpen(false);},children:[\"\\u5BB6\\u8A08\\u7C3F\\u3092\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u9078\\u3076\"]}),\" \"]})}):\"\",isSignedIn?/*#__PURE__*/_jsxs(\"p\",{onClick:handleSignout,children:[\"\\u30B5\\u30A4\\u30F3\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u30A2\\u30A6\\u30C8\"]}):/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/singin\",children:[\"\\u30B5\\u30A4\\u30F3\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u30A4\\u30F3\"]})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(style.modalback,\" \").concat(modalOpen?style.modalbackOpen:''),onClick:handleModal})]});};export default MobileModal;","map":{"version":3,"sources":["/Users/taiki/Desktop/household/frontend/src/components/Header/MobileModal/MobileModal.tsx"],"names":["React","useContext","Cookies","Link","useHistory","AuthContext","signOut","style","MobileModal","props","modalOpen","setModalOpen","history","isSignedIn","setIsSignedIn","handleModal","handleSignout","res","data","success","remove","push","console","log","alert","mobilemodal","openmodal","inner","list","modalback","modalbackOpen"],"mappings":"6PAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA;AACA,OAASC,OAAT,KAAwB,mBAAxB,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,C,wFAOA,GAAMC,CAAAA,WAA4B,CAAG,QAA/BA,CAAAA,WAA+B,CAACC,KAAD,CAAW,CAC9C,GAAQC,CAAAA,SAAR,CAAoCD,KAApC,CAAQC,SAAR,CAAmBC,YAAnB,CAAoCF,KAApC,CAAmBE,YAAnB,CACA,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,gBAAsCH,UAAU,CAACI,WAAD,CAAhD,CAAQQ,UAAR,aAAQA,UAAR,CAAoBC,aAApB,aAAoBA,aAApB,CACA;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAAEJ,YAAY,CAAC,CAACD,SAAF,CAAZ,CAA2B,CAAvD,CACA;AACA,GAAMM,CAAAA,aAAa,0FAAG,iLAEAV,CAAAA,OAAO,EAFP,QAEZW,GAFY,eAGlB,GAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,GAAqB,IAAxB,CAA8B,CAC5BjB,OAAO,CAACkB,MAAR,CAAe,eAAf,EACAlB,OAAO,CAACkB,MAAR,CAAe,SAAf,EACAlB,OAAO,CAACkB,MAAR,CAAe,MAAf,EACAN,aAAa,CAAC,KAAD,CAAb,CACAF,OAAO,CAACS,IAAR,CAAa,SAAb,EACAC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CAPD,IAOO,CACLD,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAC,KAAK,CAAC,gBAAD,CAAL,CACD,CAbiB,+EAelBF,OAAO,CAACC,GAAR,cACAC,KAAK,CAAC,gBAAD,CAAL,CAhBkB,QAiBnB,CACDb,YAAY,CAAC,KAAD,CAAZ,CAlBoB,oEAAH,kBAAbK,CAAAA,aAAa,0CAAnB,CAqBA,mBACE,oCACE,YAAK,SAAS,WAAKT,KAAK,CAACkB,WAAX,aAA2Bf,SAAS,CAAGH,KAAK,CAACmB,SAAT,CAAqB,EAAzD,CAAd,uBACE,YAAK,SAAS,CAAEnB,KAAK,CAACoB,KAAtB,uBACE,aAAK,SAAS,CAAEpB,KAAK,CAACqB,IAAtB,WACIf,UAAU,cACV,gCAAG,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBAAa,cAAM,OAAO,CAAE,yBAAMF,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAAf,mDAA8C,aAA9C,kBAAb,OAAH,EADU,CACkF,EAFhG,CAIIE,UAAU,cAAG,WAAG,OAAO,CAAEG,aAAZ,6CAA8B,aAA9B,wBAAH,cAAiD,gCAAG,MAAC,IAAD,EAAM,EAAE,CAAC,SAAT,6CAAsB,aAAtB,kBAAH,EAJ/D,GADF,EADF,EADF,cAWE,YACE,SAAS,WAAKT,KAAK,CAACsB,SAAX,aAAyBnB,SAAS,CAAGH,KAAK,CAACuB,aAAT,CAAyB,EAA3D,CADX,CAEE,OAAO,CAAEf,WAFX,EAXF,GADF,CAmBD,CA/CD,CAiDA,cAAeP,CAAAA,WAAf","sourcesContent":["import React, { useContext } from 'react';\nimport Cookies from 'js-cookie';\nimport { Link, useHistory } from 'react-router-dom';\nimport { AuthContext } from '../../../App';\n// component\nimport { signOut } from '../../../api/auth';\n// css\nimport style from './MobileModal.module.scss';\n\ntype Props = {\n  modalOpen: boolean;\n  setModalOpen: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst MobileModal: React.FC<Props> = (props) => {\n  const { modalOpen, setModalOpen } = props;\n  const history = useHistory();\n  const { isSignedIn, setIsSignedIn } = useContext(AuthContext);\n  // モーダルの表示判定の変更処理\n  const handleModal = () => { setModalOpen(!modalOpen); };\n  // サインアウト処理\n  const handleSignout = async () => {\n    try {\n      const res = await signOut();\n      if(res.data.success === true) {\n        Cookies.remove(\"_access_token\");\n        Cookies.remove(\"_client\");\n        Cookies.remove(\"_uid\");\n        setIsSignedIn(false);\n        history.push(\"/signin\");\n        console.log('サインアウトしました')\n      } else {\n        console.log('サインアウトに失敗しました')\n        alert('サインアウトできませんでした')\n      }\n    } catch (err: any) {\n      console.log(err);\n      alert('サインアウトできませんでした')\n    };\n    setModalOpen(false);\n  };\n\n  return (\n    <div>\n      <div className={`${style.mobilemodal} ${ modalOpen ? style.openmodal : '' }`}>\n        <div className={style.inner}>\n          <div className={style.list}>\n            { isSignedIn ?\n              <p><Link to='/'><span onClick={() => setModalOpen(false)}>家計簿を<br />選ぶ</span> </Link></p> : \"\"\n            }\n            { isSignedIn ? <p onClick={handleSignout}>サイン<br />アウト</p> : <p><Link to='/singin'>サイン<br />イン</Link></p> }\n          </div>\n        </div>\n      </div>\n      <div\n        className={`${style.modalback} ${ modalOpen ? style.modalbackOpen : '' }`}\n        onClick={handleModal}\n      >\n      </div>\n    </div>\n  )\n}\n\nexport default MobileModal"]},"metadata":{},"sourceType":"module"}