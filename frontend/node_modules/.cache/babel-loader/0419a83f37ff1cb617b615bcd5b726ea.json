{"ast":null,"code":"import _asyncToGenerator from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/taiki/Desktop/household/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useContext}from'react';import{useHistory,Link}from'react-router-dom';import Cookies from'js-cookie';import{AuthContext}from'../../App';// component\nimport{signOut}from'../../api/auth';import MobileModal from'./MobileModal/MobileModal';//css\nimport style from'./Header.module.scss';// image\nimport MobileMenuButton from'../../image/mobileMenu.png';import MobileMenuCrossButton from'../../image/mobilemenu_crossmark.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Header=function Header(){var history=useHistory();var _useContext=useContext(AuthContext),isSignedIn=_useContext.isSignedIn,setIsSignedIn=_useContext.setIsSignedIn;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];// モバイル用モーダルの開閉\nvar handleModal=function handleModal(){setModalOpen(!modalOpen);};// サインアウト\nvar handleSignout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signOut();case 3:res=_context.sent;if(res.data.success===true){Cookies.remove(\"_access_token\");Cookies.remove(\"_client\");Cookies.remove(\"_uid\");setIsSignedIn(false);history.push(\"/signin\");console.log('サインアウトしました');}else{console.log('サインアウトに失敗しました');alert('サインアウトできませんでした');}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);alert('サインアウトできませんでした');case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleSignout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.header,children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"\\u308F\\u305F\\u3057\\u306E\\u5BB6\\u8A08\\u7C3F\"})}),/*#__PURE__*/_jsx(\"div\",{className:style.mobilemenu,children:/*#__PURE__*/_jsx(\"img\",{onClick:handleModal,className:modalOpen?style.crossmark:style.mobilemenuBack,src:modalOpen?MobileMenuCrossButton:MobileMenuButton,alt:\"header menu\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:style.pcmenu,children:[isSignedIn?/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"\\u5BB6\\u8A08\\u7C3F\\u3092\\u9078\\u3076\"})}):\"\",/*#__PURE__*/_jsx(\"li\",{className:style.sign,children:isSignedIn?/*#__PURE__*/_jsx(\"span\",{onClick:handleSignout,children:\"\\u30B5\\u30A4\\u30F3\\u30A2\\u30A6\\u30C8\"}):/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\"})})]})]}),/*#__PURE__*/_jsx(MobileModal,{modalOpen:modalOpen,setModalOpen:setModalOpen})]});};export default Header;","map":{"version":3,"sources":["/Users/taiki/Desktop/household/frontend/src/components/Header/Header.tsx"],"names":["React","useState","useContext","useHistory","Link","Cookies","AuthContext","signOut","MobileModal","style","MobileMenuButton","MobileMenuCrossButton","Header","history","isSignedIn","setIsSignedIn","modalOpen","setModalOpen","handleModal","handleSignout","res","data","success","remove","push","console","log","alert","header","mobilemenu","crossmark","mobilemenuBack","pcmenu","sign"],"mappings":"0XAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,WAAT,KAA4B,WAA5B,CAEA;AACA,OAASC,OAAT,KAAwB,gBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CAEA;AACA,MAAOC,CAAAA,KAAP,KAAkB,sBAAlB,CAEA;AACA,MAAOC,CAAAA,gBAAP,KAA6B,4BAA7B,CACA,MAAOC,CAAAA,qBAAP,KAAkC,sCAAlC,C,6IAGA,GAAMC,CAAAA,MAAgB,CAAG,QAAnBA,CAAAA,MAAmB,EAAM,CAC7B,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CACE,gBAGED,UAAU,CAACI,WAAD,CAHZ,CACAQ,UADA,aACAA,UADA,CAEAC,aAFA,aAEAA,aAFA,CAIF,cAAkCd,QAAQ,CAAC,KAAD,CAA1C,wCAAOe,SAAP,eAAkBC,YAAlB,eAEA;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBD,YAAY,CAAC,CAACD,SAAF,CAAZ,CACD,CAFD,CAIA;AACA,GAAMG,CAAAA,aAAa,0FAAG,iLAEAZ,CAAAA,OAAO,EAFP,QAEZa,GAFY,eAIlB,GAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,GAAqB,IAAxB,CAA8B,CAC5BjB,OAAO,CAACkB,MAAR,CAAe,eAAf,EACAlB,OAAO,CAACkB,MAAR,CAAe,SAAf,EACAlB,OAAO,CAACkB,MAAR,CAAe,MAAf,EAEAR,aAAa,CAAC,KAAD,CAAb,CACAF,OAAO,CAACW,IAAR,CAAa,SAAb,EAEAC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CATD,IASO,CACLD,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAC,KAAK,CAAC,gBAAD,CAAL,CACD,CAhBiB,+EAkBlBF,OAAO,CAACC,GAAR,cACAC,KAAK,CAAC,gBAAD,CAAL,CAnBkB,oEAAH,kBAAbR,CAAAA,aAAa,0CAAnB,CAuBA,mBACE,wCACE,aAAK,SAAS,CAAEV,KAAK,CAACmB,MAAtB,wBACE,iCACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wDADF,EADF,cAME,YAAK,SAAS,CAAEnB,KAAK,CAACoB,UAAtB,uBACE,YACE,OAAO,CAAEX,WADX,CAEE,SAAS,CAAEF,SAAS,CAAGP,KAAK,CAACqB,SAAT,CAAqBrB,KAAK,CAACsB,cAFjD,CAGE,GAAG,CAAGf,SAAS,CAAGL,qBAAH,CAA2BD,gBAH5C,CAIE,GAAG,CAAC,aAJN,EADF,EANF,cAeE,YAAI,SAAS,CAAED,KAAK,CAACuB,MAArB,WACIlB,UAAU,cAAI,iCAAK,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,kDAAL,EAAJ,CAA2C,EADzD,cAEE,WAAI,SAAS,CAAEL,KAAK,CAACwB,IAArB,UAA6BnB,UAAU,cAAG,aAAM,OAAO,CAAEK,aAAf,kDAAH,cAAiD,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,4CAAxF,EAFF,GAfF,GADF,cAqBE,KAAC,WAAD,EAAa,SAAS,CAAEH,SAAxB,CAAmC,YAAY,CAAEC,YAAjD,EArBF,GADF,CAyBD,CA9DD,CAgEA,cAAeL,CAAAA,MAAf","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport { AuthContext } from '../../App';\n\n// component\nimport { signOut } from '../../api/auth';\nimport MobileModal from './MobileModal/MobileModal';\n\n//css\nimport style from './Header.module.scss';\n\n// image\nimport MobileMenuButton from '../../image/mobileMenu.png';\nimport MobileMenuCrossButton from '../../image/mobilemenu_crossmark.png';\n\n\nconst Header: React.FC = () => {\n  const history = useHistory();\n    const { \n    isSignedIn, \n    setIsSignedIn,\n  } = useContext(AuthContext);\n  const [modalOpen, setModalOpen] = useState(false);\n\n  // モバイル用モーダルの開閉\n  const handleModal = () => {\n    setModalOpen(!modalOpen);\n  };\n\n  // サインアウト\n  const handleSignout = async () => {\n    try {\n      const res = await signOut();\n  \n      if(res.data.success === true) {\n        Cookies.remove(\"_access_token\");\n        Cookies.remove(\"_client\");\n        Cookies.remove(\"_uid\");\n  \n        setIsSignedIn(false);\n        history.push(\"/signin\");\n  \n        console.log('サインアウトしました')\n      } else {\n        console.log('サインアウトに失敗しました')\n        alert('サインアウトできませんでした')\n      }\n    } catch (err: any) {\n      console.log(err);\n      alert('サインアウトできませんでした')\n    }\n  };\n\n  return (\n    <>\n      <div className={style.header}>\n        <h1>\n          <Link to='/'>\n            わたしの家計簿\n          </Link>\n        </h1>\n        <div className={style.mobilemenu}>\n          <img \n            onClick={handleModal} \n            className={modalOpen ? style.crossmark : style.mobilemenuBack }\n            src={ modalOpen ? MobileMenuCrossButton : MobileMenuButton } \n            alt='header menu' \n          />\n        </div>\n\n        <ul className={style.pcmenu}>\n          { isSignedIn  ? <li ><Link to='/'>家計簿を選ぶ</Link></li> : \"\" }\n          <li className={style.sign}>{ isSignedIn ? <span onClick={handleSignout}>サインアウト</span> : <Link to='/signin'>サインイン</Link>}</li>\n        </ul>\n      </div>\n      <MobileModal modalOpen={modalOpen} setModalOpen={setModalOpen} />\n    </>\n  )\n}\n\nexport default Header"]},"metadata":{},"sourceType":"module"}